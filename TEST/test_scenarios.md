# Test Scenarios for Telegram Client Bot

Документ содержит основные сценарии ручного тестирования и тестирования через Postman. Охватывает как функциональность бота, так и обработку API-запросов.

---

## 1. Команды Telegram-бота (ручное тестирование)

| № | Команда    | Описание                                     | Ожидаемый результат                              | Факт     | Примечание        |
|---|------------|----------------------------------------------|--------------------------------------------------|----------|-------------------|
| 1 | `/start`   | Запуск бота                                  | Отправляется приветственное сообщение            | Да        | —                 |
| 2 | `/tour`    | Открытие анкеты                              | Появляется inline-меню с вариантами              | Да        | —                 |
| 3 | `/faq`     | Ответ на частые вопросы                      | Отправляется список вопросов и ответов           | Да        | —                 |
| 4 | `/unknown` | Ввод команды, не зарегистрированной в боте   | Ответ: "Команда не распознана" или игнорирование | Да        | —                 |
| 5 | текст      | Ввод произвольного текста                    | Бот корректно отвечает или логирует              | Да        | Обработка есть    |

---

## 2. Webhook/API (Postman тесты)

| № | Метод | Endpoint                            | Цель запроса                     | Ожидаемый ответ  | Статус | Примечание                            |
|---|-------|-------------------------------------|----------------------------------|------------------|--------|---------------------------------------|
| 1 | GET   | `/getWebhookInfo`                   | Проверка текущего webhook        | 200 + JSON       | ОК      | Webhook активен                       |
| 2 | POST  | `/setWebhook?url=...`               | Привязка webhook к Flask         | 200 OK           | ОК      | —                                     |
| 3 | POST  | `/deleteWebhook`                    | Отключение webhook               | 200 OK           | ОК      | Используется при `getUpdates`        |
| 4 | GET   | `/getUpdates` (при webhook ON)      | Проверка ошибки                  | 409 Conflict     | Ошибка    | Telegram запрещает `getUpdates`      |
| 5 | POST  | `/sendMessage`                      | Отправка сообщения пользователю | 200 OK           | ОК     | Тест с `chat_id` и `text`            |

---

##  3. Проверка производительности

| Показатель            | Значение  | Комментарий                          |
|-----------------------|-----------|--------------------------------------|
| Время ответа бота     | ~1 сек    | После фикса инициализации            |
| Повторные команды     | 1 ответ   | Дублирование устранено               |
| Время развертывания   | ~3 мин    | PythonAnywhere                       |

---

##  Примечания

- Для `getUpdates` Telegram требует сначала удалить webhook.
- Повторные ответы раньше возникали из-за повторной инициализации `application`.
- Используется библиотека `python-telegram-bot` v20+ и `Flask`.

---

##  Связанные файлы

- [`test_results.md`](./test_results.md) — фактические результаты
- [`TEST/postman.collection.json`](../TEST/postman.collection.json) — коллекция Postman
